{"ast":null,"code":"//JobsList.js\nimport React,{useState,useEffect}from'react';import{deleteJob}from'./utils/jobs_list/DeleteJob.js';import Portal from'./StatusDropdownPortal.js';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const JobsList=_ref=>{let{removeJobCallBack,jobsState}=_ref;const[openDropdownId,setOpenDropdownId]=useState(null);const[dropdownCoords,setDropdownCoords]=useState({top:0,left:0});const toggleDropdown=(e,jobId)=>{e.stopPropagation();const rect=e.currentTarget.getBoundingClientRect();// Close if clicking the same dropdown\nif(openDropdownId===jobId){setOpenDropdownId(null);return;}setDropdownCoords({top:rect.bottom,left:rect.left});console.log(dropdownCoords);setOpenDropdownId(jobId);};useEffect(()=>{const handleClickOutside=()=>{setOpenDropdownId(null);};window.addEventListener('click',handleClickOutside);jobsState.forEach(job=>{console.log('Checking dropdown for job:',job.id,'==',openDropdownId);});return()=>window.removeEventListener('click',handleClickOutside);},[]);const handleDeleteJob=(e,jobId,jobCompany,jobTitle)=>{e.preventDefault();deleteJob(jobId,jobCompany,jobTitle);//Delete job from the database\nremoveJobCallBack(jobId);//RemoveJob from the jobs state\n};const countJobStatus=()=>{const appliedCount=jobsState.filter(job=>job.status==='Applied').length;const rejectedCount=jobsState.filter(job=>job.status==='Rejected').length;const interviewCount=jobsState.filter(job=>job.status==='Interview').length;const statusCount={applied:appliedCount,rejected:rejectedCount,interview:interviewCount};return statusCount;};return/*#__PURE__*/_jsx(\"div\",{className:\"box p-0\",style:{marginTop:'20px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container jobs-table-container\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-fullwidth is-striped is-hoverable\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"has-text-centered\",children:/*#__PURE__*/_jsxs(\"th\",{colSpan:\"7\",className:\"has-text-centered\",children:[\"Applied Jobs: \",countJobStatus().applied]})}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'15%'},children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'15%'},children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'},children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'20%'},children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'},children:\"URL\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'20%'},children:\"Actions\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:jobsState.map(job=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:job.company}),/*#__PURE__*/_jsx(\"td\",{children:job.position}),/*#__PURE__*/_jsx(\"td\",{className:\"jobs-table-narrow-column\",children:job.date}),/*#__PURE__*/_jsxs(\"td\",{className:\"jobs-table-narrow-column\",children:[\" \",/*#__PURE__*/_jsxs(\"span\",{className:`tag ${job.status}`,children:[\" \",job.status,\" \"]}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:job.location}),/*#__PURE__*/_jsxs(\"td\",{className:\"jobs-table-narrow-column\",children:[\" \",/*#__PURE__*/_jsx(\"a\",{href:job.url,target:\"_blank\",rel:\"noopener noreferrer\",children:\"link\"}),\" \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"jobs-actions\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:e=>toggleDropdown(e,job.id),children:\" Actions \\u25BC \"}),openDropdownId===job.id&&/*#__PURE__*/_jsx(Portal,{children:/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu is-active\",style:{position:'fixed',top:dropdownCoords.top,left:dropdownCoords.left,zIndex:9999,backgroundColor:'white',border:'1px solid #ccc',borderRadius:'4px',boxShadow:'0 2px 6px rgba(0,0,0,0.2)'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-content\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",children:\"Rejected\"}),/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",children:\"Interview\"}),/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-item\",onClick:e=>handleDeleteJob(e,job.id,job.company,job.title),children:\"Delete\"})]})})})]})]},job.id))})]})})});};export default JobsList;","map":{"version":3,"names":["React","useState","useEffect","deleteJob","Portal","jsxs","_jsxs","jsx","_jsx","JobsList","_ref","removeJobCallBack","jobsState","openDropdownId","setOpenDropdownId","dropdownCoords","setDropdownCoords","top","left","toggleDropdown","e","jobId","stopPropagation","rect","currentTarget","getBoundingClientRect","bottom","console","log","handleClickOutside","window","addEventListener","forEach","job","id","removeEventListener","handleDeleteJob","jobCompany","jobTitle","preventDefault","countJobStatus","appliedCount","filter","status","length","rejectedCount","interviewCount","statusCount","applied","rejected","interview","className","style","marginTop","children","colSpan","width","map","company","position","date","location","href","url","target","rel","onClick","zIndex","backgroundColor","border","borderRadius","boxShadow","title"],"sources":["/home/ayoo1131/guitar_note_to_tabs/my_app/dashboard/applications/applied_jobs/frontend/src/components/body/JobsList.js"],"sourcesContent":["//JobsList.js\nimport React, { useState, useEffect } from 'react';\nimport { deleteJob } from './utils/jobs_list/DeleteJob.js'\nimport Portal from './StatusDropdownPortal.js';\n\nconst JobsList = ({ removeJobCallBack, jobsState }) => {\n\tconst [openDropdownId, setOpenDropdownId] = useState(null);\n\tconst [dropdownCoords, setDropdownCoords] = useState({top: 0, left: 0});\n\t\n\tconst toggleDropdown = (e, jobId) => {\n\t\te.stopPropagation();\n\n\t\tconst rect = e.currentTarget.getBoundingClientRect();\n\n    \t\t// Close if clicking the same dropdown\n    \t\tif (openDropdownId === jobId) {\n      \t\t\tsetOpenDropdownId(null);\n      \t\t\treturn;\n    \t\t}\n\n    \t\tsetDropdownCoords({ top: rect.bottom, left: rect.left });\n\t\tconsole.log(dropdownCoords);\n    \t\tsetOpenDropdownId(jobId);\n\t};\n\n\tuseEffect(() => {\n\t\tconst handleClickOutside =()=>{\n\t\t\tsetOpenDropdownId(null);\n\t\t};\n\n\t\twindow.addEventListener('click', handleClickOutside);\n\t\tjobsState.forEach((job) => {console.log('Checking dropdown for job:', job.id, '==', openDropdownId);});\n    \t\treturn () => window.removeEventListener('click', handleClickOutside);\n\n\t}, []);\n\n\tconst handleDeleteJob = (e, jobId, jobCompany, jobTitle) => {\n\t\te.preventDefault();\n\t\tdeleteJob(jobId, jobCompany, jobTitle); //Delete job from the database\n\t\tremoveJobCallBack(jobId); //RemoveJob from the jobs state\n\t};\n\n\tconst countJobStatus = () => {\n\t\tconst appliedCount = jobsState.filter(job => job.status === 'Applied').length;\n\t\tconst rejectedCount = jobsState.filter(job => job.status === 'Rejected').length;\n\t\tconst interviewCount = jobsState.filter(job => job.status === 'Interview').length;\n\t\n\t\tconst statusCount = {\n\t\t\tapplied: appliedCount,\n\t\t\trejected: rejectedCount,\n\t\t\tinterview: interviewCount\n\t\t};\n\n\t\treturn statusCount\n\t};\n\t\n\n        return (\n                <div className=\"box p-0\" style={{ marginTop: '20px' }}>\n                        <div className=\"table-container jobs-table-container\">\n                                <table className=\"table is-fullwidth is-striped is-hoverable\">\n                                        <thead>\n                \t\t\t\t<tr className='has-text-centered'>\n                                                \t<th colSpan=\"7\" className=\"has-text-centered\">Applied Jobs: {countJobStatus().applied}</th>\n\t\t\t\t\t\t</tr>\n                        \t\n\n\t\t\t\t\t\t<tr>\n                                                        <th style={{ width: '15%' }} >Company</th>\n                                                        <th style={{ width: '15%' }} >Position</th>\n                                                        <th style={{ width: '10%' }} >Date</th>\n                                                        <th style={{ width: '10%' }} >Status</th>\n                                                        <th style={{ width: '20%' }} >Location</th>\n                                                        <th style={{ width: '10%' }} >URL</th>\n                                                        <th style={{ width: '20%' }} >Actions</th>\n                                                </tr>\n                                        </thead>\n\t\t\t\t\t\t\n                                        <tbody>\n                                                {jobsState.map(job => (\n                                                        <tr key={job.id}>\n                                                                <td>{job.company}</td>\n                                                                <td>{job.position}</td>\n                                                                <td className='jobs-table-narrow-column'>{job.date}</td>\n                                                                <td className='jobs-table-narrow-column'> <span className={`tag ${job.status}`}> {job.status} </span> </td>\n                                                                <td>{job.location}</td>\n                                                                <td className='jobs-table-narrow-column'> <a href={job.url} target='_blank' rel='noopener noreferrer' >link</a> </td> {/*target='_blank' opens link in new tab rel is for security*/}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<td className=\"jobs-actions\" style={{ position: 'relative' }}>\n                  \t\t\t\t\t\t\t<button className=\"button\" onClick={(e) => toggleDropdown(e, job.id)}> Actions â–¼ </button>\n\t\t\t\t\t\t\t\t\t\n                  \t\t\t\t\t\t\t{openDropdownId === job.id && (\n                    \t\t\t\t\t\t\t\t<Portal>\n                      \t\t\t\t\t\t\t\t\t<div className=\"dropdown-menu is-active\" style={{\n                          \t\t\t\t\t\t\t\t\tposition: 'fixed',\n                          \t\t\t\t\t\t\t\t\ttop: dropdownCoords.top,\n                          \t\t\t\t\t\t\t\t\tleft: dropdownCoords.left,\n                          \t\t\t\t\t\t\t\t\tzIndex: 9999,\n                          \t\t\t\t\t\t\t\t\tbackgroundColor: 'white',\n                          \t\t\t\t\t\t\t\t\tborder: '1px solid #ccc',\n                          \t\t\t\t\t\t\t\t\tborderRadius: '4px',\n                          \t\t\t\t\t\t\t\t\tboxShadow: '0 2px 6px rgba(0,0,0,0.2)',\n                        \t\t\t\t\t\t\t\t}}>\n                        \t\t\t\t\t\t\t\t\t<div className=\"dropdown-content\">\n                          \t\t\t\t\t\t\t\t\t\t<a className=\"dropdown-item\">Rejected</a>\n                          \t\t\t\t\t\t\t\t\t\t<a className=\"dropdown-item\">Interview</a>\n                          \t\t\t\t\t\t\t\t\t\t<a className=\"dropdown-item\" onClick={(e) => handleDeleteJob(e, job.id, job.company, job.title)}>Delete</a>\n                        \t\t\t\t\t\t\t\t\t</div>\n                      \t\t\t\t\t\t\t\t\t</div>\n                    \t\t\t\t\t\t\t\t</Portal>\n                 \t\t\t\t\t\t\t)}\n                \t\t\t\t\t\t</td>\n\n                                                        </tr>\n                                                ))}\n                                        </tbody>\n                                </table>\n                        </div>\n                </div>\n        );\n};\n\nexport default JobsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}