{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{deleteJob}from'./utils/jobs_list/DeleteJob.js';import Portal from'./StatusDropdownPortal.js';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const JobsList=_ref=>{let{removeJobCallBack,jobsState}=_ref;const[openDropdownId,setOpenDropdownId]=useState(null);const[dropdownCoords,setDropdownCoords]=useState({top:0,left:0});const dropdownRef=useRef(null);const buttonRefs=useRef({});const toggleDropdown=(e,jobId)=>{e.stopPropagation();const rect=e.currentTarget.getBoundingClientRect();console.log('dropdown coords:',rect.top,rect.left);// Close if clicking the same dropdown\nif(openDropdownId===jobId){setOpenDropdownId(null);return;}setDropdownCoords({top:rect.top,left:rect.left});setOpenDropdownId(jobId);};useEffect(()=>{const handleClickOutside=()=>{setOpenDropdownId(null);};window.addEventListener('click',handleClickOutside);return()=>window.removeEventListener('click',handleClickOutside);},[]);const handleDeleteJob=(e,jobId,jobCompany,jobTitle)=>{e.preventDefault();deleteJob(jobId,jobCompany,jobTitle);removeJobCallBack(jobId);setOpenDropdownId(null);};const countJobStatus=()=>{return{applied:jobsState.filter(job=>job.status==='Applied').length,rejected:jobsState.filter(job=>job.status==='Rejected').length,interview:jobsState.filter(job=>job.status==='Interview').length};};return/*#__PURE__*/_jsx(\"div\",{className:\"box p-0\",style:{marginTop:'20px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"table-container jobs-table-container\",style:{maxHeight:'60vh',overflowY:'auto',border:'1px solid #dbdbdb',borderRadius:'4px'},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table is-fullwidth is-striped is-hoverable\",style:{tableLayout:'fixed',width:'100%'},children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"has-text-centered\",children:/*#__PURE__*/_jsxs(\"th\",{colSpan:\"7\",className:\"has-text-centered\",children:[\"Applied Jobs: \",countJobStatus().applied]})}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:'15%'},children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'15%'},children:\"Position\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'},children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'20%'},children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'10%'},children:\"URL\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'20%'},children:\"Actions\"})]})]}),/*#__PURE__*/_jsx(\"tbody\",{children:jobsState.map(job=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:job.company}),/*#__PURE__*/_jsx(\"td\",{children:job.position}),/*#__PURE__*/_jsx(\"td\",{className:\"jobs-table-narrow-column\",children:job.date}),/*#__PURE__*/_jsxs(\"td\",{className:\"jobs-table-narrow-column\",children:[\" \",/*#__PURE__*/_jsxs(\"span\",{className:`tag ${job.status}`,children:[\" \",job.status,\" \"]}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:job.location}),/*#__PURE__*/_jsxs(\"td\",{className:\"jobs-table-narrow-column\",children:[\" \",/*#__PURE__*/_jsx(\"a\",{href:job.url,target:\"_blank\",rel:\"noopener noreferrer\",children:\"link\"}),\"   \"]}),\" \",/*#__PURE__*/_jsxs(\"td\",{className:\"jobs-actions\",style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:e=>toggleDropdown(e,job.id),children:\" Actions \\u25BC \"}),openDropdownId===job.id&&/*#__PURE__*/_jsx(\"div\",{style:{background:'red',color:'white',position:'absolute',top:'100%',left:0,zIndex:9999},children:\"Dropdown inline (no portal)\"})]})]},job.id))})]})})});};export default JobsList;","map":{"version":3,"names":["React","useState","useEffect","useRef","deleteJob","Portal","jsxs","_jsxs","jsx","_jsx","JobsList","_ref","removeJobCallBack","jobsState","openDropdownId","setOpenDropdownId","dropdownCoords","setDropdownCoords","top","left","dropdownRef","buttonRefs","toggleDropdown","e","jobId","stopPropagation","rect","currentTarget","getBoundingClientRect","console","log","handleClickOutside","window","addEventListener","removeEventListener","handleDeleteJob","jobCompany","jobTitle","preventDefault","countJobStatus","applied","filter","job","status","length","rejected","interview","className","style","marginTop","children","maxHeight","overflowY","border","borderRadius","tableLayout","width","colSpan","map","company","position","date","location","href","url","target","rel","onClick","id","background","color","zIndex"],"sources":["/home/ayoo1131/guitar_note_to_tabs/my_app/dashboard/applications/applied_jobs/frontend/src/components/body/JobsList.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { deleteJob } from './utils/jobs_list/DeleteJob.js';\nimport Portal from './StatusDropdownPortal.js';\n\nconst JobsList = ({ removeJobCallBack, jobsState }) => {\n  const [openDropdownId, setOpenDropdownId] = useState(null);\n  const [dropdownCoords, setDropdownCoords] = useState({ top: 0, left: 0 });\n  const dropdownRef = useRef(null);\n  const buttonRefs = useRef({});\n\n  const toggleDropdown = (e, jobId) => {\n    e.stopPropagation();\n    const rect = e.currentTarget.getBoundingClientRect();\n    console.log('dropdown coords:', rect.top, rect.left);\n    // Close if clicking the same dropdown\n    if (openDropdownId === jobId) {\n    \tsetOpenDropdownId(null);\n        return;\n    }\n    \n    setDropdownCoords({ top: rect.top, left: rect.left });\n    setOpenDropdownId(jobId);\n  };\n\n  useEffect(() => {\n  \tconst handleClickOutside =()=>{\n    \t\tsetOpenDropdownId(null);\n        };\n\n        window.addEventListener('click', handleClickOutside);\n        return () => window.removeEventListener('click', handleClickOutside);\n  }, []);\n\n  const handleDeleteJob = (e, jobId, jobCompany, jobTitle) => {\n    e.preventDefault();\n    deleteJob(jobId, jobCompany, jobTitle);\n    removeJobCallBack(jobId);\n    setOpenDropdownId(null);\n  };\n\n  const countJobStatus = () => {\n    return {\n      applied: jobsState.filter(job => job.status === 'Applied').length,\n      rejected: jobsState.filter(job => job.status === 'Rejected').length,\n      interview: jobsState.filter(job => job.status === 'Interview').length,\n    };\n  };\n\n  return (\n    <div className=\"box p-0\" style={{ marginTop: '20px' }}>\n      <div\n        className=\"table-container jobs-table-container\"\n        style={{\n          maxHeight: '60vh',\n          overflowY: 'auto',\n          border: '1px solid #dbdbdb',\n          borderRadius: '4px',\n        }}\n      >\n        <table className=\"table is-fullwidth is-striped is-hoverable\" style={{ tableLayout: 'fixed', width: '100%' }}>\n          <thead>\n            <tr className=\"has-text-centered\">\n              <th colSpan=\"7\" className=\"has-text-centered\">\n                Applied Jobs: {countJobStatus().applied}\n              </th>\n            </tr>\n            <tr>\n              <th style={{ width: '15%' }}>Company</th>\n              <th style={{ width: '15%' }}>Position</th>\n              <th style={{ width: '10%' }}>Date</th>\n              <th style={{ width: '10%' }}>Status</th>\n              <th style={{ width: '20%' }}>Location</th>\n              <th style={{ width: '10%' }}>URL</th>\n              <th style={{ width: '20%' }}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {jobsState.map(job => (\n             <tr key={job.id}>\n    \t\t<td>{job.company}</td>\n                <td>{job.position}</td>\n                <td className='jobs-table-narrow-column'>{job.date}</td>\n                <td className='jobs-table-narrow-column'> <span className={`tag ${job.status}`}> {job.status} </span> </td>\n                <td>{job.location}</td>\n                <td className='jobs-table-narrow-column'> <a href={job.url} target='_blank' rel='noopener noreferrer' >link</a> \t\t</td> {/*target='_blank' opens link in new tab rel is for security*/}\n\n                <td className=\"jobs-actions\" style={{ position: 'relative' }}>\n                \t<button className=\"button\" onClick={(e) => toggleDropdown(e, job.id)}> Actions â–¼ </button>\n\n                        {openDropdownId === job.id && (\n                        \t<div style={{ background: 'red', color: 'white', position: 'absolute', top: '100%', left: 0, zIndex: 9999 }}>\n    \t\t\t\t\tDropdown inline (no portal)\n  \t\t\t\t</div>\n                \t)}\n                </td>\n\n            </tr>\n\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default JobsList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}